{
    "sourceFile": "frontend/src/pages/passwordReset/PasswordReset.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1738756032282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1738756259152,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,15 +3,29 @@\n \r\n const PasswordReset = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [puzzleAnswer, setPuzzleAnswer] = useState(\"\");\r\n+  const [message, setMessage] = useState(\"\");\r\n   const navigate = useNavigate();\r\n \r\n   const handleReset = async (e) => {\r\n     e.preventDefault();\r\n     // Call the API to reset the password\r\n-    // await resetPassword({ email, puzzleAnswer });\r\n-    navigate(\"/login\"); // Redirect to login after successful reset\r\n+    const response = await fetch('/reset-password', {\r\n+      method: 'POST',\r\n+      headers: {\r\n+        'Content-Type': 'application/json',\r\n+      },\r\n+      body: JSON.stringify({ email, puzzleAnswer }),\r\n+    });\r\n+\r\n+    const data = await response.json();\r\n+    if (response.ok) {\r\n+      setMessage(\"Your password has been updated. Please check your email.\");\r\n+      navigate(\"/login\"); // Redirect to login after successful reset\r\n+    } else {\r\n+      setMessage(data.message);\r\n+    }\r\n   };\r\n \r\n   return (\r\n     <div className=\"flex flex-col items-center justify-center min-w-96 mx-auto\">\r\n@@ -36,8 +50,9 @@\n           />\r\n         </div>\r\n         <button type=\"submit\">Reset Password</button>\r\n       </form>\r\n+      {message && <p>{message}</p>}\r\n     </div>\r\n   );\r\n };\r\n \r\n"
                },
                {
                    "date": 1738759849276,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,59 +1,63 @@\n import { useState } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n \r\n-const PasswordReset = () => {\r\n-  const [email, setEmail] = useState(\"\");\r\n-  const [puzzleAnswer, setPuzzleAnswer] = useState(\"\");\r\n+const ResetPassword = () => {\r\n+  const [newPassword, setNewPassword] = useState(\"\");\r\n+  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n   const [message, setMessage] = useState(\"\");\r\n   const navigate = useNavigate();\r\n \r\n-  const handleReset = async (e) => {\r\n+  const handleSubmit = async (e) => {\r\n     e.preventDefault();\r\n-    // Call the API to reset the password\r\n-    const response = await fetch('/reset-password', {\r\n-      method: 'POST',\r\n-      headers: {\r\n-        'Content-Type': 'application/json',\r\n-      },\r\n-      body: JSON.stringify({ email, puzzleAnswer }),\r\n-    });\r\n+    if (newPassword === confirmPassword) {\r\n+      // Call API to update the password\r\n+      const response = await fetch('/update-password', {\r\n+        method: 'POST',\r\n+        headers: {\r\n+          'Content-Type': 'application/json',\r\n+        },\r\n+        body: JSON.stringify({ newPassword }),\r\n+      });\r\n \r\n-    const data = await response.json();\r\n-    if (response.ok) {\r\n-      setMessage(\"Your password has been updated. Please check your email.\");\r\n-      navigate(\"/login\"); // Redirect to login after successful reset\r\n+      const data = await response.json();\r\n+      if (response.ok) {\r\n+        setMessage(\"Your password is now up to date!\");\r\n+        navigate(\"/login\"); // Redirect to login after successful update\r\n+      } else {\r\n+        setMessage(data.message);\r\n+      }\r\n     } else {\r\n-      setMessage(data.message);\r\n+      setMessage(\"Passwords do not match. Please try again.\");\r\n     }\r\n   };\r\n \r\n   return (\r\n     <div className=\"flex flex-col items-center justify-center min-w-96 mx-auto\">\r\n       <h1 className=\"text-center\">Reset Your Password</h1>\r\n-      <form onSubmit={handleReset}>\r\n+      <form onSubmit={handleSubmit}>\r\n         <div>\r\n-          <label>Email:</label>\r\n+          <label>New Password:</label>\r\n           <input\r\n\\ No newline at end of file\n-            type=\"email\"\r\n-            value={email}\r\n-            onChange={(e) => setEmail(e.target.value)}\r\n+            type=\"password\"\r\n+            value={newPassword}\r\n+            onChange={(e) => setNewPassword(e.target.value)}\r\n             required\r\n           />\r\n         </div>\r\n         <div>\r\n-          <label>Solve this puzzle: What is 2 + 2?</label>\r\n+          <label>Confirm Password:</label>\r\n           <input\r\n-            type=\"text\"\r\n-            value={puzzleAnswer}\r\n-            onChange={(e) => setPuzzleAnswer(e.target.value)}\r\n+            type=\"password\"\r\n+            value={confirmPassword}\r\n+            onChange={(e) => setConfirmPassword(e.target.value)}\r\n             required\r\n           />\r\n         </div>\r\n-        <button type=\"submit\">Reset Password</button>\r\n+        <button type=\"submit\">Submit</button>\r\n       </form>\r\n       {message && <p>{message}</p>}\r\n     </div>\r\n   );\r\n };\r\n \r\n-export default PasswordReset;\n+export default ResetPassword;\n\\ No newline at end of file\n"
                }
            ],
            "date": 1738756032282,
            "name": "Commit-0",
            "content": "import { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst PasswordReset = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [puzzleAnswer, setPuzzleAnswer] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleReset = async (e) => {\r\n    e.preventDefault();\r\n    // Call the API to reset the password\r\n    // await resetPassword({ email, puzzleAnswer });\r\n    navigate(\"/login\"); // Redirect to login after successful reset\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-w-96 mx-auto\">\r\n      <h1 className=\"text-center\">Reset Your Password</h1>\r\n      <form onSubmit={handleReset}>\r\n        <div>\r\n          <label>Email:</label>\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>Solve this puzzle: What is 2 + 2?</label>\r\n          <input\r\n            type=\"text\"\r\n            value={puzzleAnswer}\r\n            onChange={(e) => setPuzzleAnswer(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\">Reset Password</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PasswordReset;"
        }
    ]
}